on:
  push:
    branches:
      - dev
  pull_request:
    branches:
      - dev

env:
  NODE_AUTH_TOKEN: ${{ secrets.NPM_SECRET }}
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

jobs:
  npm_publish:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - uses: actions/setup-node@v2
        with:
          node-version: '14'
      - name: config git
        run: |
          git config user.name "GitHub Actions Bot"
          git config user.email "<>"
      - name: install dependencies
        run: npm install
      - name: build package
        run: npm run build
      - name: bump up version
        run: |
          npm version prerelease --preid rc
          git push
      #- name: publish
        #run: docker run design-system --env NODE_AUTH_TOKEN npm publish
        #env:
          #NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
